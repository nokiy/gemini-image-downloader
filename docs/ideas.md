# Gemini Image Downloader - 产品草稿

> 📅 创建时间：2025-12-23  
> 📌 状态：需求确认中

---

## 一、核心需求

**一句话描述**：在 Gemini 网页版中，一键批量下载当前对话中 AI 生成的所有高清图片，打包成 ZIP 文件保存到本地。

---

## 二、用户画像与场景

| 项目 | 描述 |
|------|------|
| **目标用户** | Gemini 网页版用户，需要批量保存 AI 生成图片 |
| **使用场景** | 多轮对话生成图片后，想一次性下载全部图片 |
| **当前痛点** | 一张张右键保存太麻烦，效率低下 |
| **下载用途** | 个人存档、素材库、二次编辑 |

---

## 三、MVP 功能范围

### ✅ V1.0 核心功能
1. **一键下载**：点击插件图标，自动检测并下载当前对话所有 AI 生成的图片
2. **高清优先**：获取图片的最高分辨率版本
3. **ZIP 打包**：将所有图片打包成一个 ZIP 文件下载
4. **智能命名**：ZIP 文件按规则命名

### ⏳ 后续迭代（暂不实现）
- 选择性下载（勾选部分图片）
- 下载历史记录
- 自定义命名规则
- 下载进度显示

---

## 四、命名规则方案

### ZIP 文件命名（供用户选择）

| 方案 | 示例 | 适用场景 |
|------|------|----------|
| **方案A：对话标题** | `Gemini_设计一个Logo_20231223.zip` | 标题有意义时 |
| **方案B：时间戳** | `Gemini_Images_20231223_114503.zip` | 通用场景 |
| **方案C：简洁版** | `Gemini_Images.zip` | 快速下载 |

**V1.0 采用方案**：`Gemini_image.zip`

### 图片文件命名
- 格式：`{两位序号}.{ext}`
- 示例：`01.png`, `02.jpg`
- ext 根据实际图片类型确定（png/jpg/webp 等）

---

## 五、技术调研结论

**已完成调研 ✅**

| 项目 | 结论 |
|------|------|
| **图片 URL 格式** | `https://lh3.googleusercontent.com/...=s1024-rj` |
| **高清版本获取** | 优先使用页面提供的原始图片 URL（部分图片转换 `=s0` 会导致 fetch 失败） |
| **图片选择器** | `img[src*="googleusercontent.com/gg-dl/"]` |
| **对话标题获取** | `.conversation.selected div` 元素 |

> 📌 技术可行性：**非常高**。图片 URL 格式规律，无需模拟点击，直接替换 URL 即可获取高清图。

---

## 六、待确认问题

1. ~~下载范围：当前对话 or 历史对话？~~ → **当前对话**
2. ~~图片类型：AI 生成 or 用户上传？~~ → **AI 生成的图片**
3. ~~打包格式？~~ → **ZIP**
4. 命名规则是否需要用户可配置？→ **V1.0 先固定，后续迭代**

---

## 七、下一步

1. 打开 Gemini 网页版，分析页面结构
2. 制定详细技术方案
3. 开始插件开发
